CMAKE_MINIMUM_REQUIRED(VERSION 3.10)

SET_PROPERTY(GLOBAL PROPERTY USE_FOLDERS ON)

PROJECT(CVLearning)

set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -std=c++11")
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11")

if(COMMAND cmake_policy)
      cmake_policy(SET CMP0003 NEW)
endif(COMMAND cmake_policy)

if(POLICY CMP0079)
  cmake_policy(SET CMP0079 NEW)
endif()

option(BUILD_SHARED_LIBS "Build Shared Lib" ON)
option(BUILD_SAMPLES "Build Sample Apps" ON)
option(BUILD_UNIT_TESTS "Unit Test" ON)

SET(CMAKE_INSTALL_PREFIX ${PROJECT_SOURCE_DIR}/install CACHE STRING "install" FORCE)
SET(CMAKE_CONFIGURATION_TYPES Debug;Release CACHE STRING "make Build Type" FORCE)

set(CMAKE_DEBUG_POSTFIX "d")

set(CMAKE_RUNTIME_OUTPUT_DIRECTORY_DEBUG ${PROJECT_SOURCE_DIR}/build/bin)
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY_RELEASE ${PROJECT_SOURCE_DIR}/build/bin)

set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY_DEBUG ${PROJECT_SOURCE_DIR}/build/lib)
set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY_RELEASE ${PROJECT_SOURCE_DIR}/build/lib)

SET(CVL_INCLUDE_DIR ${PROJECT_SOURCE_DIR}/src)
set(CVL_LIB_OUT_DIR ${PROJECT_SOURCE_DIR}/build/lib)

add_subdirectory(src)

IF(BUILD_SAMPLES)
    add_subdirectory(samples)
ENDIF()

IF(BUILD_UNIT_TESTS)
    add_subdirectory(unit_test)
ENDIF()

include(cmake/init_prj_depend.cmake)